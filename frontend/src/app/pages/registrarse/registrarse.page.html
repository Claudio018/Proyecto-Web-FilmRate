<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Registrarse</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="content-container">
    <form [formGroup]="registrarseForm" (ngSubmit)="onSubmit()" class="form-container">
      <div class="grid-form">
        <ion-item>
          <ion-label position="floating">Nombre de usuario</ion-label>
          <ion-input formControlName="nombre"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Rut</ion-label>
          <ion-input formControlName="rut"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Correo electrónico</ion-label>
          <ion-input type="email" formControlName="correo"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Selecciona una región</ion-label>
          <ion-select placeholder="Selecciona una región" formControlName="region" (ionChange)="onRegionChange($event.detail.value)">
            <ion-select-option *ngFor="let region of regions" [value]="region">{{ region }}</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label>Selecciona una comuna</ion-label>
          <ion-select placeholder="Selecciona una comuna" formControlName="comuna">
            <ion-select-option *ngFor="let comuna of filteredComunas" [value]="comuna">{{ comuna }}</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Contraseña</ion-label>
          <ion-input type="password" formControlName="password"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Confirmar Contraseña</ion-label>
          <ion-input type="password" formControlName="confirmPassword"></ion-input>
        </ion-item>

        <ion-item lines="none" class="terms-item">
          <ion-checkbox slot="start" formControlName="terms"></ion-checkbox>
          <ion-label>Acepto los términos y condiciones</ion-label>
        </ion-item>
      </div>

      <!-- Botón y mensajes alineados -->
      <div class="button-row">
        <ion-button expand="block" type="submit" [disabled]="registrarseForm.invalid" class="submit-button">
          Registrarse
        </ion-button>

        <!-- Mensaje de éxito en verde -->
        <div *ngIf="successMessage" class="success-message">
          {{ successMessage }}
        </div>

        <!-- Mensaje de error en rojo -->
        <div *ngIf="displayedErrorMessage" class="error-message">
          {{ displayedErrorMessage }}
        </div>
      </div>

    </form>

    <div class="image-container">
      <img src="assets/Logo.png" alt="Popcorn" />
      <p>No olvides seguirnos en nuestra página!</p>
    </div>
  </div>
</ion-content>
